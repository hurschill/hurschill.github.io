<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="welcome.html">Welcome</a></li><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="devlog1.html">Devlog #1</a></li><li class="chapter-item expanded affix "><a href="devlog2.html">Devlog #2</a></li><li class="chapter-item expanded affix "><a href="devlog3.html">Devlog #3</a></li><li class="chapter-item expanded affix "><a href="devlog4.html">Devlog #4</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="welcome"><a class="header" href="#welcome">Welcome</a></h1>
<p>Check the devlog entries for more information. No organized information has been published, yet.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<div style="break-before: page; page-break-before: always;"></div><p>dev log #1</p>
<p>writing of this document began @~D20240312T0100Z</p>
<p>what you'll need:</p>
<ul>
<li>old laptop</li>
<li>internet connection</li>
<li>debian 12.5.0 (stable)</li>
<li>google account</li>
<li>tailscale</li>
<li>vscode</li>
<li>nano</li>
<li>ssh</li>
<li>bash</li>
<li>python</li>
<li>git</li>
<li>github</li>
<li>docker</li>
<li>portainer</li>
<li>pgadmin</li>
<li>postgres</li>
<li>sql</li>
<li>bootstrap</li>
<li>mdbook</li>
</ul>
<ol start="0">
<li>
<p>this guide is going to assume that you're working from a workstation that is <strong><strong>not</strong></strong> the old laptop being used as a server. this guide will be written from the perspective of a person with both machines locally available, but primarily operating from a "main" computer with the server being accessed remotely/over the network</p>
</li>
<li>
<p>you'll need to get the old laptop connected to the internet and running debian os (we were using 12.5.0 at the time of writing). this may include downloading the netinst .iso file, balena etcher/rufus, and going through the initial installation. furthermore, this guide assumes you have the prerequisite knowledge to do this on your own.</p>
</li>
<li>
<p>before you start, you'll <em>probably</em> want make sure you have a google and github account, and if you don't then make them (github at least, which you'll need an email for... such as gmail). for all intents and purposes, most people will already fulfill this requirement, and your "normal" accounts should work just fine.</p>
</li>
<li>
<p>use either your google or github account to signup for tailscale via oauth</p>
</li>
<li>
<p>on the computer you'll be using, make sure you have a serviceable text editor (at least). we use a combination of nano and vscode for pretty much everything.</p>
</li>
<li>
<p>sign up for tailscale. log in and setup both machines you'll be using. feel free to share the connection with a friend so they can also access your net. ssh from your "main" computer to your "server" computer when you're ready.</p>
</li>
<li>
<p>install git, configure git. this guide assumes you know how to do this. else, visit: <a href="https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup">https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup</a></p>
</li>
<li>
<p>install gh (cli tool). authenticate and login. <code>gh auth login -w</code> should take care of this. if you have trouble, read the docs.</p>
</li>
<li>
<p>clone the repository that corresponds to this guide. the repository of code and stuff that is used should be located at https://github.com/hurschill/ledger but it may have moved or something. check the "hurschill" organization if you're unable to clone the repository using the ledger project url listed.</p>
</li>
<li>
<p>now might be a good time to make sure you have bash and python + pip package manager available for use. if you do, create a virtual environment <code>python3 -m venv .venv</code> and activate it to install packages with <code>pip install -r requirements.txt</code> (<code>deactivate</code> to exit the virtual environment)</p>
</li>
<li>
<p>install docker and make sure it works by <em><strong>reading the docs</strong></em> (always read the docs) <a href="https://docs.docker.com/engine/install/debian">https://docs.docker.com/engine/install/debian</a></p>
</li>
</ol>
<blockquote>
<p>at this point, it's basically all work inside containers from here on out. we haven't actually worked through this project to develop a production deployment solution yet.ultimately, you're going to need portainer, pgadmin, and postgres.</p>
</blockquote>
<ol start="11">
<li>create some directories to put your docker stuff in. for example, if you cloned the project repository to <code>~/some_dir</code> then you could do <code>mkdir ~/some_dir/docker</code> and create the following:</li>
</ol>
<ul>
<li><code>~/some_dir/docker/portainer</code></li>
<li><code>~/some_dir/docker/pgadmin</code></li>
<li><code>~/some_dir/docker/postgres</code></li>
</ul>
<ol start="12">
<li>
<p>each container directory from step 11 will get its own docker-compose.yml followed by a <code>docker compose</code> command. we're working on making scripts to hold your hand while doing this part. don't forget to keep track of your username and password combinations used for your container things.</p>
</li>
<li>
<p>after getting portainer, pgadmin, and postgres up/working then a schema needs to be made plus a whole bunch of sql script will be run to create a basic database.</p>
</li>
</ol>
<blockquote>
<p>at some point, creating an mdbook website may be advisable to keep track of how your app is created/deployed/etc. so you don't forget silly stuff along the way because "it wasn't that hard"</p>
</blockquote>
<p>note from the devlog author: i got bored and stopped here to go watch a youtube video</p>
<div style="break-before: page; page-break-before: always;"></div><p>dev log #2</p>
<p>writing of this document began @~D20240319T0518Z</p>
<p>this log is written from the perspective that you have an old laptop with a fresh install of debian</p>
<p>if you haven't already setup the user account you're working from to be a passwordless sudoer, then you could do that now.
it's quick, makes your life easy, and is <em>totally</em> a very smart idea with no impact to the security of your system.
<code>echo "$username ALL=(ALL:ALL) NOPASSWD: ALL" &gt;&gt; /etc/sudoers.d/$username</code>
<em>(replace $username with the username of the account to grant passwordless sudoer permission to)</em></p>
<p>make sure you have <code>curl</code> installed for the next step
<code>sudo apt install -y curl</code></p>
<p>if you haven't already, sign up for tailscale using your google, github, or other oauth-enabled account.
for more information on tailscale, visit: <code>https://tailscale.com/download/linux</code>
-&gt; run: <code>curl -fsSL https://tailscale.com/install.sh | sh</code>
-&gt; then: <code>sudo tailscale up</code>
-&gt; follow the authenication link printed to the terminal
-&gt; and login to your account
<strong>tailscale should now be setup.</strong></p>
<p>i didn't feel like writing anymore tonight because it felt like i'd end up getting lazy and missing some steps.
to recap, at this point you should have an old laptop with debian stable installed, an account with passwordless sudoer permissions, curl installed, and tailscale installed+up &amp; running. other devices on your tailnet should be able to connect to this machine now.</p>
<div style="break-before: page; page-break-before: always;"></div><p>dev log #3</p>
<p>writing of this document began @~D20240319T1806H</p>
<p>prereqs:
this log is written from the perspective that you have an old laptop with a fresh install of debian as well as tailscale set up/connected and are working from a "remote" workstation (even if the two computers are right next to each other)</p>
<p>ssh:
for the beginning of this entry, one would be expected to log in and beging working from their remote workstation. with that said, this is easily accomplished by using <code>ssh</code> with the command being <code>ssh $username@$ipaddress</code> where <code>$username</code> and <code>$ipaddress</code> correspond to the information associated with the old laptop's system and tailnet connection.</p>
<p>git:
additionally, taking the time to do <code>sudo apt install -y git</code> plus a good old-fashioned <code>git config --global user.name "*"</code> and <code>git config --global user.email *@*.*</code> would be advisable on both systems. for remote git hosting to do its job effectively here, it'd be best to <em>at the least</em> have the project repository public <strong>OR</strong> if private, ensure both hosts have appropriate access. using the cli tool <code>gh</code> is also helpful, given that you're using github for remote git hosting. on debian, the command to install <code>gh</code> will be <code>sudo apt install -y gh</code> and for authentication, i would recommend <code>gh auth login</code> (and paste a token) or <code>gh auth login -w</code> to login via web.</p>
<div style="break-before: page; page-break-before: always;"></div><p>dev log #4</p>
<p>writing of this document began @~D20240324T1847H</p>
<p>alright. first, we recap the progress thus far:
old laptop, debian, passwordless sudoer, ssh, curl, git, tailscale, and a workstation to access it from.</p>
<p>we should probably get the docker engine installed. it's going to be important for many of the steps to follow.</p>
<p>docker docs can be found here: <a href="https://docs.docker.com/engine/install/debian">https://docs.docker.com/engine/install/debian</a></p>
<p>if you find documentation scary and just want to cheat, the steps are as follows:
(i'll add these in script form later...) (it's later now, and i just slammed all these snippets into a single bash file and full sent it. seems to work fine, lol. at time of writing, script name is <code>*/ledger/setup/docker/install-docker-engine.bash</code> -- this may change)</p>
<ol>
<li>uninstall conflicting packages <code>for pkg in docker.io docker-doc docker-compose podman-docker containerd runc; do sudo apt-get remove $pkg; done</code></li>
<li>setup apt repo</li>
</ol>
<pre><code class="language-bash"># Add Docker's official GPG key:
sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# Add the repository to Apt sources:
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \
  $(. /etc/os-release &amp;&amp; echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
sudo apt-get update
</code></pre>
<ol start="3">
<li>install docker packages <code>sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</code></li>
<li>function check your install <code>sudo docker run hello-world</code></li>
<li>check your terminal for the message</li>
</ol>
<pre><code>Hello from Docker!
This message shows that your installation appears to be working correctly.
</code></pre>
<p>if you got the above message as output, you should be fine to continue. all signs point to docker now being setup and installed on the old laptop.</p>
<p>create a docker volume named <code>portainer_data</code> by running</p>
<pre><code class="language-bash">docker volume create portainer_data
</code></pre>
<blockquote>
<p>may require root/sudo permissions to run</p>
</blockquote>
<p>docker volumes are typically created within docker's volume mgmt sys but the exact location depends on your docker config. by default, docker manages volumes within its own directory structure, usually located in <code>/var/lib/docker/volumes/</code> (on linux systems)</p>
<p>run <code>docker volume inspect</code> to provide information about the volume such as mount point (which indicates where the volume is stored on the system)</p>
<p>to continue, the next step after creating <code>portainer_data</code> will be to create a <code>docker-compose.yml</code> file (<code>~/ledger/setup/docker/portainer/docker-compose.yml</code>) with the following contents:</p>
<pre><code class="language-yml">version: "3.7"

services:
  portainer:
    image: portainer/portainer-ce:latest
    container_name: portainer
    restart: always
    ports:
      - "9000:9000"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /docker/portainer/portainer_data:/data
</code></pre>
<p>then, from the <code>~/ledger/setup/docker/portainer/</code> directory, run <code>sudo docker compose up -d</code></p>
<blockquote>
<p>the <code>*/docker/portainer/docker-compose.yml</code> can be created anywhere on the system, but in this case will be included in the <code>ledger</code> project repository.</p>
</blockquote>
<p>after running the above command, <code>portainer</code> should now be up and reachable on your tailnet at {ip_address}:{port} and the default port number is 9000 at the time of writing</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
